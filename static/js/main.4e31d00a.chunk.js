(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{30:function(n,e,t){},37:function(n,e,t){},38:function(n,e,t){"use strict";t.r(e);var r,c,i,a,o,s,b,d,j,l,u,x,p=t(0),h=t(20),g=t.n(h),O=(t(30),t(4)),f=t(3),m=t(2),v=t(7),y=t(5),w=Object(p.createContext)(null),k="token",S=function(){return localStorage.getItem(k)},C=function(n){localStorage.setItem(k,n)},z="https://student-json-api.lidemy.me",N=function(){return fetch("".concat(z,"/posts?_sort=createdAt&_order=desc")).then((function(n){return n.json()}))},P=function(){var n=S();return fetch("".concat(z,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))},U=t(1),$=m.b.div(r||(r=Object(f.a)(["\n  background: #eeeeee;\n  display: flex;\n  flex-direction: column;\n"]))),_=m.b.div(c||(c=Object(f.a)(["\n  margin: 30px auto 0 auto;\n  border-bottom: 1px solid skyblue;\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n  border: 1px solid lightgrey;\n  border-radius: 5px;\n  width: 800px;\n  flex-direction: column;\n  align-items: self-start;\n  background: rgb(255,255,255, 0.5);\n\n  &:nth-child(6) {\n    margin-bottom: 100px;\n  }\n\n  @media screen and (max-width: 800px) {\n    width: 500px;\n  }\n"]))),A=Object(m.b)(v.b)(i||(i=Object(f.a)(["\n  font-size: 24px;\n  color: #666;\n  text-decoration: none;\n  min-width: 500px;\n"]))),E=m.b.div(a||(a=Object(f.a)(["\n  color: rgba(0, 0, 0, 0.8);\n  min-width: 200px;\n  margin-top: 10px;\n"]))),J=m.b.div(o||(o=Object(f.a)(["\n  font-size: 24px;\n  color: #666;\n  margin-top: 20px;\n  min-width: 500px;\n  max-height: 100px;\n  overflow: hidden; \n  text-overflow: ellipsis;\n"]))),L=m.b.div(s||(s=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 300px;\n  background-image: url(",");\n  background-size: 100%;\n  background: center cover;\n  background-repeat: no-repeat;\n  color: white;\n  border-radius: 5px;\n  font-size: 50px;\n"])),(function(n){return n.img}));function B(n){var e=n.post;return Object(U.jsxs)(_,{children:[Object(U.jsx)(A,{to:"/posts/".concat(e.id),children:e.title}),Object(U.jsx)(E,{children:new Date(e.createdAt).toLocaleString()}),Object(U.jsx)(J,{children:e.body})]})}function D(){var n=Object(p.useState)([]),e=Object(O.a)(n,2),t=e[0],r=e[1];return Object(p.useEffect)((function(){N().then((function(n){return r([n[0],n[1],n[2],n[3],n[4]])}))}),[]),Object(U.jsxs)($,{children:[Object(U.jsx)(L,{img:"/blog/homepage.jpeg",children:"Welcome to my blog"}),t.map((function(n){return Object(U.jsx)(B,{post:n},n.id)}))]})}var T,I,M,R,W,q=m.b.div(b||(b=Object(f.a)(["\n  color: red;\n  margin: 10px;\n"]))),F=m.b.form(d||(d=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),G=m.b.input(j||(j=Object(f.a)(["\n  margin: 10px;\n  border-radius: 5px;\n  border: lightgrey 1px solid;\n"]))),H=m.b.button(l||(l=Object(f.a)(["\n  border: lightgrey solid 1px;\n  background: rgb(255,255,255);\n  padding: 10px;\n  border-radius: 30px;\n  margin: 30px;\n\n  &:hover {\n    background: black;\n    color: white;\n    cursor: pointer;\n  }\n"]))),K=m.b.div(u||(u=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n  margin: 50px auto;\n  border: lightgrey solid 1px;\n  padding: 20px;\n  box-shadow: 0 0 4px #777;\n  background: rgb(255,255,255, 0.6);\n  max-width: 360px;\n  border-radius: 10px;\n"]))),Q=m.b.h2(x||(x=Object(f.a)(["\n  text-align: center;\n"])));function V(){var n=Object(p.useContext)(w).setUser,e=Object(p.useState)(""),t=Object(O.a)(e,2),r=t[0],c=t[1],i=Object(p.useState)(""),a=Object(O.a)(i,2),o=a[0],s=a[1],b=Object(p.useState)(),d=Object(O.a)(b,2),j=d[0],l=d[1],u=Object(y.f)();return Object(U.jsx)(K,{children:Object(U.jsxs)(F,{onSubmit:function(e){l(null),function(n,e){return fetch("".concat(z,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:e})}).then((function(n){return n.json()}))}(r,o).then((function(e){if(0===e.ok)return l(e.message);C(e.token),P().then((function(e){if(1!==e.ok)return C(null),l(e.toString());n(e.data),u.push("/")}))}))},children:[Object(U.jsx)(Q,{children:"\u767b\u5165"}),Object(U.jsxs)("div",{children:["Username: ",Object(U.jsx)(G,{value:r,onChange:function(n){return c(n.target.value)}})]}),Object(U.jsxs)("div",{children:["Password: ",Object(U.jsx)(G,{type:"password",value:o,onChange:function(n){return s(n.target.value)}})]}),Object(U.jsx)(H,{children:"Submit"}),j&&Object(U.jsx)(q,{children:j})]})})}var X,Y,Z,nn=m.b.div(T||(T=Object(f.a)(["\n  height: 64px;\n  display: flex;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  padding: 0 32px;\n  box-sizing: border-box;\n"]))),en=m.b.div(I||(I=Object(f.a)(["\n  font-size: 42px;\n  font-weight: bold;\n\n  @media screen and (max-width: 760px) {\n    font-size: 24px;\n  }\n"]))),tn=m.b.div(M||(M=Object(f.a)(["\n  display: flex;\n  align-items: center;\n\n  @media screen and (max-width: 760px) {\n    font-size: 24px;\n  }\n"]))),rn=Object(m.b)(v.b)(R||(R=Object(f.a)(["\n  display: flex;\n  heigth: 100%;\n  align-items: center;\n  justify-content: center;\n  height: 64px;\n  border-box: box-box;\n  width: 100px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n\n  ","\n"])),(function(n){return n.$active&&"\n      background: rgba(0, 0, 0, 0.2)\n    "})),cn=m.b.div(W||(W=Object(f.a)(["\n  display: flex;\n  align-items: center;\n\n  "," {\n    margin-left: 32px;\n  }\n"])),tn);function an(){var n=Object(y.g)(),e=Object(p.useContext)(w),t=e.user,r=e.setUser,c=Object(y.f)();return Object(U.jsxs)(nn,{children:[Object(U.jsxs)(cn,{children:[Object(U.jsx)(en,{children:"My Blog"}),Object(U.jsxs)(tn,{children:[Object(U.jsx)(rn,{to:"/",$active:"/"===n.pathname,as:v.b,children:"\u9996\u9801"}),Object(U.jsx)(rn,{to:"/articles",$active:"/articles"===n.pathname,as:v.b,children:"\u6587\u7ae0\u5217\u8868"}),Object(U.jsx)(rn,{to:"/about",$active:"/about"===n.pathname,as:v.b,children:"\u95dc\u65bc"}),t&&Object(U.jsx)(rn,{to:"/new-post",$active:"/new-post"===n.pathname,children:"\u767c\u5e03\u6587\u7ae0"})]})]}),Object(U.jsxs)(tn,{children:[!t&&Object(U.jsx)(rn,{to:"/login",$active:"/login"===n.pathname,children:"\u767b\u5165"}),!t&&Object(U.jsx)(rn,{to:"/register",$active:"/register"===n.pathname,as:v.b,children:"\u8a3b\u518a"}),t&&Object(U.jsx)(rn,{to:"/",onClick:function(){C(""),r(null),"/"!==n.pathname&&c.push("/")},children:"\u767b\u51fa"})]})]})}var on,sn,bn,dn,jn,ln=m.b.div(X||(X=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 30px;\n  width: 80%;\n  margin: 0 auto;\n"]))),un=m.b.div(Y||(Y=Object(f.a)(["\n  border: 1px lightgrey solid;\n  padding: 10px;\n  border-radius: 5px;\n  margin: 10px 0;\n  box-shadow: 0 0 2px #666;\n  background: rgb(255,255,255, 0.6);\n"]))),xn=m.b.div(Z||(Z=Object(f.a)(["\n  margin-top: 10px;\n  border: 1px lightgrey solid;\n  padding: 10px;\n  border-radius: 5px;\n  min-height: 640px;\n  box-shadow: 0 0 2px #666;\n"])));function pn(n){var e=n.blog;return Object(U.jsxs)(ln,{img:"/blog/article.jpeg",children:["\u6a19\u984c\uff1a",Object(U.jsx)(un,{children:e.title}),"\u5167\u5bb9\uff1a",Object(U.jsx)(xn,{children:e.body})]})}function hn(){var n=Object(y.h)().id,e=Object(p.useState)([]),t=Object(O.a)(e,2),r=t[0],c=t[1];return Object(p.useEffect)((function(){(function(n){return fetch("".concat(z,"/posts?_sort=createdAt&_order=desc&id=").concat(n)).then((function(n){return n.json()}))})(n).then((function(n){c(n[0])})).catch((function(n){console.log(n)}))}),[n]),Object(U.jsx)(pn,{blog:r})}var gn,On,fn,mn,vn=m.b.div(on||(on=Object(f.a)(["\n  color: red;\n  margin: 10px;\n"]))),yn=m.b.form(sn||(sn=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 30px;\n  width: 80%;\n  margin: 0 auto;\n"]))),wn=m.b.input(bn||(bn=Object(f.a)(["\n  border: 1px lightgrey solid;\n  padding: 10px;\n  border-radius: 5px;\n  margin: 10px 0;\n  box-shadow: 0 0 2px #666;\n"]))),kn=m.b.textarea(dn||(dn=Object(f.a)(["\n  margin-top: 10px;\n  border: 1px lightgrey solid;\n  padding: 10px;\n  border-radius: 5px;\n  resize: none;\n  box-shadow: 0 0 2px #666;\n"]))),Sn=m.b.button(jn||(jn=Object(f.a)(["\n  width: 100px;\n  border: 1px lightgrey solid;\n  padding: 5px;\n  border-radius: 10px;\n  background: white;\n  cursor: pointer;\n  box-shadow: 0 0 2px #666;\n  margin: 10px auto 0 auto;\n\n  &:hover {\n    background: black;\n    color: white;\n  }\n"])));function Cn(){var n=Object(p.useContext)(w),e=(n.user,n.setUser,Object(p.useState)("")),t=Object(O.a)(e,2),r=t[0],c=t[1],i=Object(p.useState)(""),a=Object(O.a)(i,2),o=a[0],s=a[1],b=Object(p.useState)(),d=Object(O.a)(b,2),j=d[0],l=d[1],u=Object(y.f)();return Object(U.jsxs)(yn,{onSubmit:function(n){if(!r||!o)return l("Title or Conent are missing");P().then((function(n){if(1!==n.ok)return C(null),l(n.toString())})),function(n,e){var t=S();return fetch("".concat(z,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(t)},body:JSON.stringify({title:n,body:e})}).then((function(n){return n.json()}))}(r,o).then((function(n){if(2===n.code)return l(n.message);u.push("/")}))},children:["\u6a19\u984c\uff1a",Object(U.jsx)(wn,{value:r,onChange:function(n){return c(n.target.value)}}),"\u5167\u5bb9\uff1a",Object(U.jsx)(kn,{rows:"20",type:"password",value:o,onChange:function(n){return s(n.target.value)}}),Object(U.jsx)(Sn,{children:"\u9001\u51fa"}),j&&Object(U.jsx)(vn,{children:j})]})}var zn,Nn,Pn,Un,$n,_n,An=m.b.div(gn||(gn=Object(f.a)(["\n  background-image: url(",");\n  background-size: 100%;\n  background: center cover;\n  background-repeat: no-repeat;\n  display: flex;\n  min-height: 600px;\n"])),(function(n){return n.img})),En=m.b.div(On||(On=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  margin: 50px auto 600px auto;\n  border: lightgrey solid 1px;\n  padding: 20px;\n  max-width: 640px;\n  border-radius: 10px;\n  max-height: 200px;\n  box-shadow: 0 0 4px #777;\n  background: rgb(255,255,255, 0.6);\n"]))),Jn=m.b.h2(fn||(fn=Object(f.a)(["\n  justify-content: center;\n"]))),Ln=m.b.div(mn||(mn=Object(f.a)(["\n  overflow: hiddern;\n"])));function Bn(){return Object(U.jsx)(An,{img:"/blog/about.jpeg",children:Object(U.jsxs)(En,{children:[Object(U.jsx)(Jn,{children:"\u95dc\u65bc"}),Object(U.jsxs)(Ln,{children:["\u4e0d\u77e5\u9053\u8a72\u6253\u4e00\u4e9b\u4ec0\u9ebc\u597d\uff0c\u4eba\u751f\u9858\u671b\u662f\u53ef\u4ee5\u548c\u72d7\u72d7\u4f4f\u5728\u65b9\u5713\u4e00\u516c\u91cc\u6c92\u6709\u4eba\u7159\u3001\u8d70\u5341\u5206\u9418\u5c31\u5230\u5ca9\u5834\u7684\u5730\u65b9\uff1b\u8208\u8da3\u662f\u8d70\u5728\u6bd4\u8f03\u9661\u7684\u659c\u5761\u4e0a\u9762\u3002",Object(U.jsx)("p",{children:"\u559c\u6b61\u807d\u8001\u6b4c\uff0c\u6700\u8fd1\u90fd\u5728\u807d\u4f0d\u4f70\u7684\u6b4c\uff0c\u662f\u8aaa\u6f14\u5531\u6703\u53c8\u5ef6\u671f\u5230\u660e\u5e74\u4e86\uff0c\u54ed\u54ed"})]})]})})}var Dn=m.b.div(zn||(zn=Object(f.a)(["\n  color: red;\n  margin: 10px;\n"]))),Tn=m.b.form(Nn||(Nn=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),In=m.b.input(Pn||(Pn=Object(f.a)(["\n  margin: 10px;\n  border-radius: 5px;\n  border: lightgrey 1px solid;\n"]))),Mn=m.b.button(Un||(Un=Object(f.a)(["\n  border: lightgrey solid 1px;\n  background: rgb(255,255,255);\n  padding: 10px;\n  border-radius: 30px;\n  margin: 30px;\n\n  &:hover {\n    background: black;\n    color: white;\n    cursor: pointer;\n  }\n"]))),Rn=m.b.div($n||($n=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n  margin: 50px auto;\n  border: lightgrey solid 1px;\n  padding: 20px;\n  box-shadow: 0 0 4px #777;\n  background: rgb(255,255,255, 0.6);\n  max-width: 360px;\n  border-radius: 10px;\n"]))),Wn=m.b.h2(_n||(_n=Object(f.a)(["\n  text-align: center;\n"])));function qn(){var n=Object(p.useContext)(w).setUser,e=Object(p.useState)(""),t=Object(O.a)(e,2),r=t[0],c=t[1],i=Object(p.useState)(""),a=Object(O.a)(i,2),o=a[0],s=a[1],b=Object(p.useState)(""),d=Object(O.a)(b,2),j=d[0],l=d[1],u=Object(p.useState)(),x=Object(O.a)(u,2),h=x[0],g=x[1],f=Object(y.f)();return Object(U.jsx)(Rn,{children:Object(U.jsxs)(Tn,{onSubmit:function(e){g(null),function(n,e,t){return fetch("".concat(z,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:e,password:t})}).then((function(n){return n.json()}))}(j,r,o).then((function(e){if(0===e.ok)return g(e.message);C(e.token),P().then((function(e){if(1!==e.ok)return C(null),g(e.toString());n(e.data),f.push("/")}))}))},children:[Object(U.jsx)(Wn,{children:"\u8a3b\u518a"}),Object(U.jsxs)("div",{children:["Nickname: ",Object(U.jsx)(In,{value:j,onChange:function(n){return l(n.target.value)}})]}),Object(U.jsxs)("div",{children:["Username: ",Object(U.jsx)(In,{value:r,onChange:function(n){return c(n.target.value)}})]}),Object(U.jsxs)("div",{children:["Password: ",Object(U.jsx)(In,{type:"password",value:o,onChange:function(n){return s(n.target.value)}})]}),Object(U.jsx)(Mn,{children:"Submit"}),h&&Object(U.jsx)(Dn,{children:h})]})})}var Fn,Gn,Hn,Kn,Qn,Vn=t(25),Xn=t.n(Vn),Yn=(t(37),m.b.div(Fn||(Fn=Object(f.a)(["\n  width: 80%;\n  margin: 0 auto;\n"])))),Zn=m.b.div(Gn||(Gn=Object(f.a)(["\n  margin-top: 30px;\n  border-bottom: 1px solid skyblue;\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n"]))),ne=Object(m.b)(v.b)(Hn||(Hn=Object(f.a)(["\n  font-size: 24px;\n  color: #666;\n  text-decoration: none;\n"]))),ee=m.b.div(Kn||(Kn=Object(f.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"])));function te(n){var e=n.post;return Object(U.jsxs)(Zn,{children:[Object(U.jsx)(ne,{to:"/posts/".concat(e.id),children:e.title}),Object(U.jsx)(ee,{children:new Date(e.createdAt).toLocaleString()})]})}function re(){var n=Object(p.useState)([]),e=Object(O.a)(n,2),t=e[0],r=e[1],c=Object(p.useState)(0),i=Object(O.a)(c,2),a=i[0],o=i[1],s=Object(p.useState)(5),b=Object(O.a)(s,1)[0],d=Object(p.useState)(0),j=Object(O.a)(d,2),l=j[0],u=j[1];Object(p.useEffect)((function(){N().then((function(n){u(Math.ceil(n.length/b));var e=n.slice(a,a+b);r(e)}))}),[a]);return Object(U.jsx)(Yn,{children:Object(U.jsxs)("div",{className:"App",children:[t.map((function(n){return Object(U.jsx)(te,{post:n},n.id)})),Object(U.jsx)(Xn.a,{previousLabel:"prev",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:l,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:function(n){var e=n.selected;o(5*e)},containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"})]})})}var ce=m.b.div(Qn||(Qn=Object(f.a)(["\n  padding-top: 64px;  \n"])));var ie=function(){var n=Object(p.useState)(""),e=Object(O.a)(n,2),t=e[0],r=e[1];return Object(p.useEffect)((function(){S()&&P().then((function(n){n.ok&&r(n.data)}))})),Object(U.jsx)(w.Provider,{value:{user:t,setUser:r},children:Object(U.jsx)(ce,{children:Object(U.jsxs)(v.a,{children:[Object(U.jsx)(an,{}),Object(U.jsxs)(y.c,{children:[Object(U.jsx)(y.a,{exact:!0,path:"/about",children:Object(U.jsx)(Bn,{})}),Object(U.jsx)(y.a,{exact:!0,path:"/articles",children:Object(U.jsx)(re,{})}),Object(U.jsx)(y.a,{exact:!0,path:"/",children:Object(U.jsx)(D,{})}),Object(U.jsx)(y.a,{exact:!0,path:"/login",children:Object(U.jsx)(V,{})}),Object(U.jsx)(y.a,{exact:!0,path:"/register",children:Object(U.jsx)(qn,{})}),Object(U.jsx)(y.a,{exact:!0,path:"/new-post",children:t&&Object(U.jsx)(Cn,{})}),Object(U.jsx)(y.a,{path:"/posts/:id",children:Object(U.jsx)(hn,{})})]})]})})})};g.a.render(Object(U.jsx)(m.a,{theme:{colors:{red_300:"#220000",red_400:"#440000",red_500:"#660000"}},children:Object(U.jsx)(ie,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.4e31d00a.chunk.js.map