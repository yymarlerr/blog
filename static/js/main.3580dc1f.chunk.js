(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{28:function(n,e,t){},36:function(n,e,t){"use strict";t.r(e);var r,c,i,o,a,b,s,d,j,u,x,l,p=t(0),h=t(19),g=t.n(h),O=(t(28),t(5)),f=t(3),m=t(2),v=t(7),y=t(4),w=Object(p.createContext)(null),k="token",S=function(){return localStorage.getItem(k)},C=function(n){localStorage.setItem(k,n)},z="https://student-json-api.lidemy.me",U=function(){return fetch("".concat(z,"/posts?_sort=createdAt&_order=desc")).then((function(n){return n.json()}))},$=function(){var n=S();return fetch("".concat(z,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))},_=t(1),P=m.b.div(r||(r=Object(f.a)(["\n  background: #eeeeee;\n  display: flex;\n  flex-direction: column;\n"]))),E=m.b.div(c||(c=Object(f.a)(["\n  margin: 30px auto 0 auto;\n  border-bottom: 1px solid skyblue;\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n  border: 1px solid lightgrey;\n  border-radius: 5px;\n  width: 800px;\n  flex-direction: column;\n  align-items: self-start;\n  background: rgb(255,255,255, 0.5);\n\n  &:nth-child(6) {\n    margin-bottom: 100px;\n  }\n\n  @media screen and (max-width: 800px) {\n    width: 500px;\n  }\n"]))),J=Object(m.b)(v.b)(i||(i=Object(f.a)(["\n  font-size: 24px;\n  color: #666;\n  text-decoration: none;\n  min-width: 500px;\n"]))),A=m.b.div(o||(o=Object(f.a)(["\n  color: rgba(0, 0, 0, 0.8);\n  min-width: 200px;\n  margin-top: 10px;\n"]))),B=m.b.div(a||(a=Object(f.a)(["\n  font-size: 24px;\n  color: #666;\n  margin-top: 20px;\n  min-width: 500px;\n  max-height: 100px;\n  overflow: hidden; \n  text-overflow: ellipsis;\n"]))),N=m.b.div(b||(b=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 300px;\n  background-image: url(",");\n  background-size: 100%;\n  background: center cover;\n  background-repeat: no-repeat;\n  color: white;\n  border-radius: 5px;\n  font-size: 50px;\n"])),(function(n){return n.img}));function T(n){var e=n.post;return Object(_.jsxs)(E,{children:[Object(_.jsx)(J,{to:"/posts/".concat(e.id),children:e.title}),Object(_.jsx)(A,{children:new Date(e.createdAt).toLocaleString()}),Object(_.jsx)(B,{children:e.body})]})}function I(){var n=Object(p.useState)([]),e=Object(O.a)(n,2),t=e[0],r=e[1];return Object(p.useEffect)((function(){U().then((function(n){return r([n[0],n[1],n[2],n[3],n[4]])}))}),[]),Object(_.jsxs)(P,{children:[Object(_.jsx)(N,{img:"/blog/homepage.jpeg",children:"Welcome to my blog"}),t.map((function(n){return Object(_.jsx)(T,{post:n},n.id)}))]})}var D,L,M,W,q,F=m.b.div(s||(s=Object(f.a)(["\n  color: red;\n  margin: 10px;\n"]))),G=m.b.form(d||(d=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),H=m.b.input(j||(j=Object(f.a)(["\n  margin: 10px;\n  border-radius: 5px;\n  border: lightgrey 1px solid;\n"]))),K=m.b.button(u||(u=Object(f.a)(["\n  border: lightgrey solid 1px;\n  background: rgb(255,255,255);\n  padding: 10px;\n  border-radius: 30px;\n  margin: 30px;\n\n  &:hover {\n    background: black;\n    color: white;\n    cursor: pointer;\n  }\n"]))),Q=m.b.div(x||(x=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n  margin: 50px auto;\n  border: lightgrey solid 1px;\n  padding: 20px;\n  box-shadow: 0 0 4px #777;\n  background: rgb(255,255,255, 0.6);\n  max-width: 360px;\n  border-radius: 10px;\n"]))),R=m.b.h2(l||(l=Object(f.a)(["\n  text-align: center;\n"])));function V(){var n=Object(p.useContext)(w).setUser,e=Object(p.useState)(""),t=Object(O.a)(e,2),r=t[0],c=t[1],i=Object(p.useState)(""),o=Object(O.a)(i,2),a=o[0],b=o[1],s=Object(p.useState)(),d=Object(O.a)(s,2),j=d[0],u=d[1],x=Object(y.f)();return Object(_.jsx)(Q,{children:Object(_.jsxs)(G,{onSubmit:function(e){u(null),function(n,e){return fetch("".concat(z,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:e})}).then((function(n){return n.json()}))}(r,a).then((function(e){if(0===e.ok)return u(e.message);C(e.token),$().then((function(e){if(1!==e.ok)return C(null),u(e.toString());n(e.data),x.push("/")}))}))},children:[Object(_.jsx)(R,{children:"\u767b\u5165"}),Object(_.jsxs)("div",{children:["Username: ",Object(_.jsx)(H,{value:r,onChange:function(n){return c(n.target.value)}})]}),Object(_.jsxs)("div",{children:["Password: ",Object(_.jsx)(H,{type:"password",value:a,onChange:function(n){return b(n.target.value)}})]}),Object(_.jsx)(K,{children:"Submit"}),j&&Object(_.jsx)(F,{children:j})]})})}var X,Y,Z,nn=m.b.div(D||(D=Object(f.a)(["\n  height: 64px;\n  display: flex;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  padding: 0 32px;\n  box-sizing: border-box;\n"]))),en=m.b.div(L||(L=Object(f.a)(["\n  font-size: 42px;\n  font-weight: bold;\n\n  @media screen and (max-width: 760px) {\n    font-size: 24px;\n  }\n"]))),tn=m.b.div(M||(M=Object(f.a)(["\n  display: flex;\n  align-items: center;\n\n  @media screen and (max-width: 760px) {\n    font-size: 24px;\n  }\n"]))),rn=Object(m.b)(v.b)(W||(W=Object(f.a)(["\n  display: flex;\n  heigth: 100%;\n  align-items: center;\n  justify-content: center;\n  height: 64px;\n  border-box: box-box;\n  width: 100px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n\n  ","\n"])),(function(n){return n.$active&&"\n      background: rgba(0, 0, 0, 0.2)\n    "})),cn=m.b.div(q||(q=Object(f.a)(["\n  display: flex;\n  align-items: center;\n\n  "," {\n    margin-left: 32px;\n  }\n"])),tn);function on(){var n=Object(y.g)(),e=Object(p.useContext)(w),t=e.user,r=e.setUser,c=Object(y.f)();return Object(_.jsxs)(nn,{children:[Object(_.jsxs)(cn,{children:[Object(_.jsx)(en,{children:"My Blog"}),Object(_.jsxs)(tn,{children:[Object(_.jsx)(rn,{to:"/",$active:"/"===n.pathname,as:v.b,children:"\u9996\u9801"}),Object(_.jsx)(rn,{to:"/articles",$active:"/articles"===n.pathname,as:v.b,children:"\u6587\u7ae0\u5217\u8868"}),Object(_.jsx)(rn,{to:"/about",$active:"/about"===n.pathname,as:v.b,children:"\u95dc\u65bc"}),t&&Object(_.jsx)(rn,{to:"/new-post",$active:"/new-post"===n.pathname,children:"\u767c\u5e03\u6587\u7ae0"})]})]}),Object(_.jsxs)(tn,{children:[!t&&Object(_.jsx)(rn,{to:"/login",$active:"/login"===n.pathname,children:"\u767b\u5165"}),!t&&Object(_.jsx)(rn,{to:"/register",$active:"/register"===n.pathname,as:v.b,children:"\u8a3b\u518a"}),t&&Object(_.jsx)(rn,{to:"/",onClick:function(){C(""),r(null),"/"!==n.pathname&&c.push("/")},children:"\u767b\u51fa"})]})]})}var an,bn,sn,dn,jn,un=m.b.div(X||(X=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 30px;\n  width: 80%;\n  margin: 0 auto;\n"]))),xn=m.b.div(Y||(Y=Object(f.a)(["\n  border: 1px lightgrey solid;\n  padding: 10px;\n  border-radius: 5px;\n  margin: 10px 0;\n  box-shadow: 0 0 2px #666;\n  background: rgb(255,255,255, 0.6);\n"]))),ln=m.b.div(Z||(Z=Object(f.a)(["\n  margin-top: 10px;\n  border: 1px lightgrey solid;\n  padding: 10px;\n  border-radius: 5px;\n  min-height: 640px;\n  box-shadow: 0 0 2px #666;\n"])));function pn(n){var e=n.blog;return Object(_.jsxs)(un,{img:"/blog/article.jpeg",children:["\u6a19\u984c\uff1a",Object(_.jsx)(xn,{children:e.title}),"\u5167\u5bb9\uff1a",Object(_.jsx)(ln,{children:e.body})]})}function hn(){var n=Object(y.h)().id,e=Object(p.useState)([]),t=Object(O.a)(e,2),r=t[0],c=t[1];return Object(p.useEffect)((function(){(function(n){return fetch("".concat(z,"/posts?_sort=createdAt&_order=desc&id=").concat(n)).then((function(n){return n.json()}))})(n).then((function(n){c(n[0])})).catch((function(n){console.log(n)}))}),[n]),Object(_.jsx)(pn,{blog:r})}var gn,On,fn,mn,vn=m.b.div(an||(an=Object(f.a)(["\n  color: red;\n  margin: 10px;\n"]))),yn=m.b.form(bn||(bn=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 30px;\n  width: 80%;\n  margin: 0 auto;\n"]))),wn=m.b.input(sn||(sn=Object(f.a)(["\n  border: 1px lightgrey solid;\n  padding: 10px;\n  border-radius: 5px;\n  margin: 10px 0;\n  box-shadow: 0 0 2px #666;\n"]))),kn=m.b.textarea(dn||(dn=Object(f.a)(["\n  margin-top: 10px;\n  border: 1px lightgrey solid;\n  padding: 10px;\n  border-radius: 5px;\n  resize: none;\n  box-shadow: 0 0 2px #666;\n"]))),Sn=m.b.button(jn||(jn=Object(f.a)(["\n  width: 100px;\n  border: 1px lightgrey solid;\n  padding: 5px;\n  border-radius: 10px;\n  background: white;\n  cursor: pointer;\n  box-shadow: 0 0 2px #666;\n  margin: 10px auto 0 auto;\n\n  &:hover {\n    background: black;\n    color: white;\n  }\n"])));function Cn(){var n=Object(p.useContext)(w),e=(n.user,n.setUser,Object(p.useState)("")),t=Object(O.a)(e,2),r=t[0],c=t[1],i=Object(p.useState)(""),o=Object(O.a)(i,2),a=o[0],b=o[1],s=Object(p.useState)(),d=Object(O.a)(s,2),j=d[0],u=d[1],x=Object(y.f)();return Object(_.jsxs)(yn,{onSubmit:function(n){if(!r||!a)return u("Title or Conent are missing");$().then((function(n){if(1!==n.ok)return C(null),u(n.toString())})),function(n,e){var t=S();return fetch("".concat(z,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(t)},body:JSON.stringify({title:n,body:e})}).then((function(n){return n.json()}))}(r,a).then((function(n){if(2===n.code)return u(n.message);x.push("/")}))},children:["\u6a19\u984c\uff1a",Object(_.jsx)(wn,{value:r,onChange:function(n){return c(n.target.value)}}),"\u5167\u5bb9\uff1a",Object(_.jsx)(kn,{rows:"20",type:"password",value:a,onChange:function(n){return b(n.target.value)}}),Object(_.jsx)(Sn,{children:"\u9001\u51fa"}),j&&Object(_.jsx)(vn,{children:j})]})}var zn,Un,$n,_n,Pn,En,Jn=m.b.div(gn||(gn=Object(f.a)(["\n  background-image: url(",");\n  background-size: 100%;\n  background: center cover;\n  background-repeat: no-repeat;\n  display: flex;\n  min-height: 600px;\n"])),(function(n){return n.img})),An=m.b.div(On||(On=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  margin: 50px auto 600px auto;\n  border: lightgrey solid 1px;\n  padding: 20px;\n  max-width: 640px;\n  border-radius: 10px;\n  max-height: 200px;\n  box-shadow: 0 0 4px #777;\n  background: rgb(255,255,255, 0.6);\n"]))),Bn=m.b.h2(fn||(fn=Object(f.a)(["\n  justify-content: center;\n"]))),Nn=m.b.div(mn||(mn=Object(f.a)(["\n  overflow: hiddern;\n"])));function Tn(){return Object(_.jsx)(Jn,{img:"/blog/about.jpeg",children:Object(_.jsxs)(An,{children:[Object(_.jsx)(Bn,{children:"\u95dc\u65bc"}),Object(_.jsxs)(Nn,{children:["\u4e0d\u77e5\u9053\u8a72\u6253\u4e00\u4e9b\u4ec0\u9ebc\u597d\uff0c\u4eba\u751f\u9858\u671b\u662f\u53ef\u4ee5\u548c\u72d7\u72d7\u4f4f\u5728\u65b9\u5713\u4e00\u516c\u91cc\u6c92\u6709\u4eba\u7159\u3001\u8d70\u5341\u5206\u9418\u5c31\u5230\u5ca9\u5834\u7684\u5730\u65b9\uff1b\u8208\u8da3\u662f\u8d70\u5728\u6bd4\u8f03\u9661\u7684\u659c\u5761\u4e0a\u9762\u3002",Object(_.jsx)("p",{children:"\u559c\u6b61\u807d\u8001\u6b4c\uff0c\u6700\u8fd1\u90fd\u5728\u807d\u4f0d\u4f70\u7684\u6b4c\uff0c\u662f\u8aaa\u6f14\u5531\u6703\u53c8\u5ef6\u671f\u5230\u660e\u5e74\u4e86\uff0c\u54ed\u54ed"})]})]})})}var In,Dn,Ln,Mn,Wn=m.b.div(zn||(zn=Object(f.a)(["\n  color: red;\n  margin: 10px;\n"]))),qn=m.b.form(Un||(Un=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),Fn=m.b.input($n||($n=Object(f.a)(["\n  margin: 10px;\n  border-radius: 5px;\n  border: lightgrey 1px solid;\n"]))),Gn=m.b.button(_n||(_n=Object(f.a)(["\n  border: lightgrey solid 1px;\n  background: rgb(255,255,255);\n  padding: 10px;\n  border-radius: 30px;\n  margin: 30px;\n\n  &:hover {\n    background: black;\n    color: white;\n    cursor: pointer;\n  }\n"]))),Hn=m.b.div(Pn||(Pn=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n  margin: 50px auto;\n  border: lightgrey solid 1px;\n  padding: 20px;\n  box-shadow: 0 0 4px #777;\n  background: rgb(255,255,255, 0.6);\n  max-width: 360px;\n  border-radius: 10px;\n"]))),Kn=m.b.h2(En||(En=Object(f.a)(["\n  text-align: center;\n"])));function Qn(){var n=Object(p.useContext)(w).setUser,e=Object(p.useState)(""),t=Object(O.a)(e,2),r=t[0],c=t[1],i=Object(p.useState)(""),o=Object(O.a)(i,2),a=o[0],b=o[1],s=Object(p.useState)(""),d=Object(O.a)(s,2),j=d[0],u=d[1],x=Object(p.useState)(),l=Object(O.a)(x,2),h=l[0],g=l[1],f=Object(y.f)();return Object(_.jsx)(Hn,{children:Object(_.jsxs)(qn,{onSubmit:function(e){g(null),function(n,e,t){return fetch("".concat(z,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:e,password:t})}).then((function(n){return n.json()}))}(j,r,a).then((function(e){if(0===e.ok)return g(e.message);C(e.token),$().then((function(e){if(1!==e.ok)return C(null),g(e.toString());n(e.data),f.push("/")}))}))},children:[Object(_.jsx)(Kn,{children:"\u8a3b\u518a"}),Object(_.jsxs)("div",{children:["Nickname: ",Object(_.jsx)(Fn,{value:j,onChange:function(n){return u(n.target.value)}})]}),Object(_.jsxs)("div",{children:["Username: ",Object(_.jsx)(Fn,{value:r,onChange:function(n){return c(n.target.value)}})]}),Object(_.jsxs)("div",{children:["Password: ",Object(_.jsx)(Fn,{type:"password",value:a,onChange:function(n){return b(n.target.value)}})]}),Object(_.jsx)(Gn,{children:"Submit"}),h&&Object(_.jsx)(Wn,{children:h})]})})}var Rn,Vn=m.b.div(In||(In=Object(f.a)(["\n  width: 80%;\n  margin: 0 auto;\n"]))),Xn=m.b.div(Dn||(Dn=Object(f.a)(["\n  margin-top: 30px;\n  border-bottom: 1px solid skyblue;\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n"]))),Yn=Object(m.b)(v.b)(Ln||(Ln=Object(f.a)(["\n  font-size: 24px;\n  color: #666;\n  text-decoration: none;\n"]))),Zn=m.b.div(Mn||(Mn=Object(f.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"])));function ne(n){var e=n.post;return Object(_.jsxs)(Xn,{children:[Object(_.jsx)(Yn,{to:"/posts/".concat(e.id),children:e.title}),Object(_.jsx)(Zn,{children:new Date(e.createdAt).toLocaleString()})]})}function ee(){var n=Object(p.useState)([]),e=Object(O.a)(n,2),t=e[0],r=e[1];return Object(p.useEffect)((function(){U().then((function(n){return r(n)}))}),[]),Object(_.jsx)(Vn,{children:t.map((function(n){return Object(_.jsx)(ne,{post:n},n.id)}))})}var te=m.b.div(Rn||(Rn=Object(f.a)(["\n  padding-top: 64px;  \n"])));var re=function(){var n=Object(p.useState)(""),e=Object(O.a)(n,2),t=e[0],r=e[1];return Object(p.useEffect)((function(){S()&&$().then((function(n){n.ok&&r(n.data)}))})),Object(_.jsx)(w.Provider,{value:{user:t,setUser:r},children:Object(_.jsx)(te,{children:Object(_.jsxs)(v.a,{children:[Object(_.jsx)(on,{}),Object(_.jsxs)(y.c,{children:[Object(_.jsx)(y.a,{exact:!0,path:"/about",children:Object(_.jsx)(Tn,{})}),Object(_.jsx)(y.a,{exact:!0,path:"/articles",children:Object(_.jsx)(ee,{})}),Object(_.jsx)(y.a,{exact:!0,path:"/",children:Object(_.jsx)(I,{})}),Object(_.jsx)(y.a,{exact:!0,path:"/login",children:Object(_.jsx)(V,{})}),Object(_.jsx)(y.a,{exact:!0,path:"/register",children:Object(_.jsx)(Qn,{})}),Object(_.jsx)(y.a,{exact:!0,path:"/new-post",children:t&&Object(_.jsx)(Cn,{})}),Object(_.jsx)(y.a,{path:"/posts/:id",children:Object(_.jsx)(hn,{})})]})]})})})};g.a.render(Object(_.jsx)(m.a,{theme:{colors:{red_300:"#220000",red_400:"#440000",red_500:"#660000"}},children:Object(_.jsx)(re,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.3580dc1f.chunk.js.map